import{r as A,v as D}from"./Euv9bMr_.js";import{w as E}from"./C__Wf3JA.js";function P(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function R(n,f){n.d(1),f.delete(n.key)}function j(n,f,s,k,g,w,i,r,a,$,m,x){let c=n.length,d=w.length,l=c;const p={};for(;l--;)p[n[l].key]=l;const h=[],S=new Map,b=new Map,W=[];for(l=d;l--;){const e=x(g,w,l),o=s(e);let t=i.get(o);t?W.push(()=>t.p(e,f)):(t=$(o,e),t.c()),S.set(o,h[l]=t),o in p&&b.set(o,Math.abs(l-p[o]))}const M=new Set,v=new Set;function y(e){D(e,1),e.m(r,m),i.set(e.key,e),m=e.first,d--}for(;c&&d;){const e=h[d-1],o=n[c-1],t=e.key,u=o.key;e===o?(m=e.first,c--,d--):S.has(u)?!i.has(t)||M.has(t)?y(e):v.has(u)?c--:b.get(t)>b.get(u)?(v.add(t),y(e)):(M.add(u),c--):(a(o,i),c--)}for(;c--;){const e=n[c];S.has(e.key)||a(e,i)}for(;d;)y(h[d-1]);return A(W),h}function J(){const{subscribe:n,set:f}=E([]);let s=null;function k(w,i){s&&s.close(),s=new WebSocket(`${w}?token=${i}`),s.onopen=()=>console.log("WebSocket connection opened"),s.onmessage=r=>{console.log("Pesan raw dari onmessage: ",r.data);try{const a=JSON.parse(r.data);console.log("Data dari backend: ",a),f(a)}catch(a){console.error("Error parsing WebSocket message:",a)}},s.onclose=()=>{console.log("WebSocket connection closed"),s=null},s.onerror=r=>console.error("WebSocket error:",r)}function g(){s&&s.close()}return{subscribe:n,connect:k,close:g}}const q=J();export{R as d,P as e,q as r,j as u};
